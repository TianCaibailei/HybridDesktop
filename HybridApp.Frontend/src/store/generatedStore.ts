// Generated by HybridApp.Core.Generators.TsStoreGenerator
// Do not edit manually
import { create } from 'zustand';

export interface VisionVM {
  exposure: number;
  gain: number;
  isRunning: boolean;
}

export interface AppState {
  visionVM: VisionVM;
}

export interface AppActions {
  updateStateFromBackend: (vmName: string, propName: string, value: any) => void;
  setBackendState: (newState: Partial<AppState>) => void;
  initFullState: (fullState: AppState) => void;
}

export const useAppStore = create<AppState & AppActions>((set) => ({
  visionVM: {} as VisionVM,
  updateStateFromBackend: (vmName, propName, value) => set((state) => {
    // Convert PascalCase vmName to camelCase state key
    const stateKey = vmName.charAt(0).toLowerCase() + vmName.slice(1);
    // Check if the state key exists to avoid runtime errors
    if (!(stateKey in state)) return state;
    
    return {
      ...state,
      [stateKey]: {
        ...(state as any)[stateKey],
        [propName]: value
      }
    } as Partial<AppState>;
  }),
  setBackendState: (newState) => set((state) => ({ ...state, ...newState })),
  initFullState: (fullState) => set(fullState),
}));
